<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <script>
    // console.log('开始了')
    // fetch('https://wesbos.com/wp-json/wp/v2/posts')
    // .then(function(res){
    //     console.log('A');
    // })
    // fetch('http://data.ratp.fr/api/datasets/1.0/search/?q=paris')
    // .then(function(res){
    //     console.log('B');
    // })

    // //等到异步A和异步B发生之后，再执行
    // console.log('C');
    // //顺序执行？ js执行顺序不再同步
    // 异步 所以js的执行顺序得不到保证，
    // A->B->c


    // 许下诺言，先好好写代码，找到工作之后一定回来找你
    //对未来会发生的事情
    // 将要耗时的事情，交给promise
    // 解决 reject 拒绝
    // promise提供复杂任务是的调度顺序
// <!-- 

//         const P = new Promise((resolve, reject) => {
//                 console.log('A');
//                 setTimeout(() => {
//                     // 数据查询 mysql，读取文件，定时任务
//                     // resolve('A is over');
//                     reject('失败原因'); 
//                 }, 1000)
//             });
            
//             // 强制代码的执行顺序，让他可以同步执行
//             // 代码的执行顺序
//             p.then((res) => {
//                 console.log(res);
//             }).catch(e => {
//                 console.log(e);
//             }) -->

// B?...
// A  长=> C(A)
// .then  等下执行


// 两件异步事件，发生不确定的时间 promise
const postsPromise = fetch('https://wesbos.com/wp-json/wp/v2/posts');
const streetCarsPromise = fetch('http://data.ratp.fr/api/datasets/1.0/search/?q=paris');
postsPromise.then();

// 最晚的那个执行完，A,B 结果 在执行c
promise.all([postsPromise,streetCarsPromise])
.then(responses => {
    console.log(responses);  
    return Promise.all(responses.map(
        res => res.json()//json化
))
})
.then(responses => {
    console.log(responses);
})
</script>
</body>
</html>